{"remainingRequest":"/Users/denya/Desktop/workspace/vue-cli/hello-world/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/denya/Desktop/workspace/vue-cli/hello-world/src/views/evaluate.vue?vue&type=style&index=0&id=4072b388&scoped=true&lang=scss&","dependencies":[{"path":"/Users/denya/Desktop/workspace/vue-cli/hello-world/src/views/evaluate.vue","mtime":1542349494919},{"path":"/Users/denya/Desktop/workspace/vue-cli/hello-world/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/denya/Desktop/workspace/vue-cli/hello-world/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/denya/Desktop/workspace/vue-cli/hello-world/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Users/denya/Desktop/workspace/vue-cli/hello-world/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/denya/Desktop/workspace/vue-cli/hello-world/node_modules/cache-loader/dist/cjs.js","mtime":1533548609359},{"path":"/Users/denya/Desktop/workspace/vue-cli/hello-world/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.evaluate {\n  min-height: 100vh;\n  background-color: rgba(243, 244, 246, 1);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding-bottom: 1.44rem;\n  box-sizing: border-box;\n\n  section {\n    width: 9.47rem;\n    background-color: rgba(255, 255, 255, 1);\n    box-shadow: 0 .05rem .11rem 0 rgba(0, 0, 0, 0.02);\n    border-radius: .21rem;\n    align-items: center;\n    margin-top: .27rem;\n    padding-bottom: .37rem;\n    display: flex;\n    flex-direction: column;\n    box-sizing: border-box;\n\n    textarea {\n      width: 8.72rem;\n      height: 2.93rem;\n      background-color: rgba(252, 252, 252, 1);\n      border-radius: .05rem;\n      border: 1px solid rgba(234, 234, 234, 1);\n      padding: .27rem;\n      font-size: .37rem;\n      font-family: PingFangSC-Regular;\n      font-weight: 400;\n      line-height: .53rem;\n      margin-top: .8rem;\n      box-sizing: border-box;\n    }\n\n    textarea::-webkit-input-placeholder {\n      color: rgba(201, 201, 201, 1);\n    }\n\n    h2 {\n      font-size: .37rem;\n      font-family: PingFangSC-Medium;\n      font-weight: 500;\n      color: rgba(51, 51, 51, 1);\n      line-height: .53rem;\n      margin-top: .53rem;\n    }\n\n    .satisfactionArticle {\n      display: flex;\n      margin-top: .64rem;\n\n      .noBox {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        margin-right: 1.15rem;\n      }\n\n      .yesBox {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        margin-left: 1.15rem;\n      }\n\n      .likeIcon {\n        width: 1.07rem;\n        height: 1.07rem;\n      }\n\n      .likeText {\n        box-sizing: border-box;\n        padding-top: .27rem;\n        font-size: .32rem;\n        font-family: PingFangSC-Regular;\n        font-weight: 400;\n        color: rgba(153, 153, 153, 1);\n        line-height: .45rem;\n      }\n\n      .likeActive {\n        color: #FF7800;\n      }\n    }\n\n    .labelBoxArticle {\n      display: flex;\n      flex-direction: row;\n      flex-wrap: wrap;\n      justify-content: center;\n      margin-top: .53rem;\n\n      .labelBoxText {\n        box-sizing: border-box;\n        padding: 0 .27rem;\n        height: .64rem;\n        border-radius: .37rem;\n        border: 1px solid rgba(218, 218, 218, 1);\n        line-height: .64rem;\n        text-align: center;\n        margin-bottom: .27rem;\n        margin-right: .19rem;\n        font-size: .32rem;\n        font-family: PingFangSC-Regular;\n        color: rgba(153, 153, 153, 1);\n      }\n\n      .labelBoxActive {\n        background-color: rgba(0, 189, 255, 0.1);\n        border: 1px solid rgba(0, 189, 255, 0.1);\n        font-family: PingFangSC-Regular;\n        color: rgba(0, 189, 255, 1);\n      }\n    }\n\n\n    .starBox {\n      flex-direction: row;\n      margin-top: .53rem;\n      justify-content: center;\n\n      .starIcon {\n        width: .69rem;\n        height: .69rem;\n        margin: 0 .27rem;\n      }\n    }\n\n    .fiveStari {\n      font-size: .32rem;\n      font-family: PingFangSC-Regular;\n      font-weight: 400;\n      color: rgba(255, 120, 0, 1);\n      line-height: .45rem;\n      margin-top: .27rem;\n    }\n  }\n\n  .bottomButton {\n    width: 10rem;\n    height: 1.44rem;\n    background: rgba(248, 248, 248, 1);\n    justify-content: center;\n    align-items: center;\n    display: flex;\n    position: fixed;\n    bottom: 0;\n  }\n\n  .bottomButtonActive {\n    width: 8.4rem;\n    height: 1.01rem;\n    background-image: linear-gradient(270deg, rgba(0, 189, 255, 1), rgba(0, 154, 255, 1));\n    border-radius: .51rem;\n    font-size: .45rem;\n    font-family: PingFangSC-Medium;\n    font-weight: 500;\n    color: rgba(255, 255, 255, 1);\n    line-height: 1.01rem;\n    text-align: center;\n  }\n\n  .cantGo {\n    width: 8.4rem;\n    height: 1.01rem;\n    background-color: #dadada;\n    border-radius: .51rem;\n    font-size: .45rem;\n    font-family: PingFangSC-Medium;\n    font-weight: 500;\n    color: rgba(255, 255, 255, 1);\n    line-height: 1.01rem;\n    text-align: center;\n  }\n}\n",{"version":3,"sources":["evaluate.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"evaluate.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"evaluate\">\n    <section v-if=\"openProject\">\n      <h2>{{projectTitle}}</h2>\n      <div class=\"satisfactionArticle\">\n        <div class=\"noBox\" @click=\"satisfaction = 1\">\n          <img v-if=\"satisfaction === 1\" class=\"likeIcon\" src=\"@/assets/images/icon_dissatisfied_h.png\">\n          <img v-else class=\"likeIcon\" src=\"@/assets/images/icon_dissatisfied_n.png\">\n          <span :class=\"['likeText',satisfaction === 1 ? 'likeActive' : '']\">不满意</span>\n        </div>\n        <div class=\"yesBox\" @click=\"satisfaction = 2\">\n          <img v-if=\"satisfaction === 2\" class=\"likeIcon\" src=\"@/assets/images/icon_satisfied_h.png\">\n          <img v-else class=\"likeIcon\" src=\"@/assets/images/icon_satisfied_n.png\">\n          <span :class=\"['likeText',satisfaction === 2 ? 'likeActive' : '']\">满意</span>\n        </div>\n      </div>\n\n      <div class=\"labelBoxArticle\">\n        <span :class=\"['labelBoxText',item.number ? 'labelBoxActive' : '']\" @click=\"changeLabel(item.id)\" v-for=\"item in detailsOutputList\" v-if=\"item.evaluateType === 3 && item.evaluateItemType == 1 && (item.evaluateGroup == satisfaction || item.evaluateGroup == 0) && satisfaction !== 0\">{{item.items}}</span>\n      </div>\n\n      <textarea v-if=\"openComment\" placeholder=\"请输入评价，不超过100个字\" v-model=\"activeComment\" maxlength=\"100\"></textarea>\n    </section>\n\n    <section>\n      <h2>服务评价</h2>\n      <div class=\"starBox\">\n        <img v-for=\"i in serviceEvaluateStar\" class=\"starIcon\" @click=\"serviceEvaluateStar = i\" src=\"@/assets/images/icon_star_h.png\">\n        <img v-for=\"i in 5 - serviceEvaluateStar\" class=\"starIcon\" @click=\"serviceEvaluateStar = i + serviceEvaluateStar\" src=\"@/assets/images/icon_star_n.png\">\n      </div>\n\n      <span class=\"fiveStari\">{{serviceEvaluateStar | starText}}</span>\n\n      <div class=\"labelBoxArticle\">\n        <span :class=\"['labelBoxText',item.number ? 'labelBoxActive' : '']\" @click=\"changeLabel(item.id)\" v-for=\"item in detailsOutputList\" v-if=\"item.evaluateType === 3 && item.evaluateItemType == 2 && (item.evaluateGroup == serviceEvaluateStar || item.evaluateGroup == 0) && serviceEvaluateStar !== 0\">{{item.items}}</span>\n      </div>\n\n      <textarea class=\"details\" placeholder=\"请输入评价，不超过100个字\" v-model=\"serviceComment\" maxlength=\"100\"></textarea>\n    </section>\n\n    <div class=\"bottomButton\">\n      <p v-if=\"((openProject && satisfaction) || !openProject) && serviceEvaluateStar\" class='bottomButtonActive' @click=\"submit\">提交</p>\n      <p v-else class='cantGo'>{{cantEvaluate}}</p>\n    </div>\n  </div>\n</template>\n\n<script>\n  import {\n    getEvaluateByEvaluatedId,\n    getEvaluateList,\n    saveEvaluate,\n    IBPsaveEvaluate\n  } from \"../service/getData\";\n\n  export default {\n    name: 'evaluate',\n    data() {\n      return {\n        id: '',\n        beEvaluatedId: '',\n        marketId: '',\n        openComment: '', //1需要评语0不需要\n        detailsOutputList: '',\n        radioStatus: 1,\n        activeComment: '',\n        serviceComment: '',\n        come: '', //1活动//2物业报修//3会议室//4投诉//5访客\n        projectTitle: '',\n        openProject: 0, //活动评价是否开启\n        serviceEvaluateStar: 0,\n        satisfaction: 0,\n        cantEvaluate: '请选取产品评价'\n      }\n    },\n    created() {\n      this.getEvaluateByEvaluatedId()\n    },\n    methods: {\n      getEvaluateByEvaluatedId: function() {\n        getEvaluateByEvaluatedId(this.$route.params.id, this.$route.params.type).then(res => {\n          if (res.res.code === 10000) {\n            console.log(res.body);\n            this.cityId = res.body.cityId\n            this.isEvaluate = res.body.isEvaluate\n            this.marketId = res.body.marketId\n            this.userName = res.body.userName\n            this.referenceNo = res.body.referenceNo\n            this.referenceName = res.body.referenceName\n            if (res.body.isEvaluate == 1) {\n              this.$router.push({\n                path: '/evaluateSuccess/0'\n              })\n            } else {\n              this.getEvaluateList(res.body.marketId, res.body.cityId, this.$route.params.type)\n            }\n          }\n        })\n      },\n      getEvaluateList: function(marketId, cityId, type) {\n        getEvaluateList(marketId, cityId, type).then(res => {\n          if (res.res.code === 10000) {\n            this.id = res.body.template.id\n            this.openProject = res.body.template.openProject\n            this.projectTitle = res.body.template.projectTitle\n            this.openComment = res.body.template.openComment\n            this.detailsOutputList = res.body.template.detailsOutputList\n            if (!this.openComment || !this.openProject) {\n              this.cantEvaluate = '请选取服务评价'\n            } else {\n              this.cantEvaluate = '请选取' + this.projectTitle\n            }\n          }\n        })\n      },\n      changeLabel: function(id) {\n        let detailsOutputList = this.detailsOutputList\n        for (var i = detailsOutputList.length; i--;) {\n          if (detailsOutputList[i].id === id) {\n            if (detailsOutputList[i].number) {\n              detailsOutputList[i].number = 0\n            } else {\n              detailsOutputList[i].number = 1\n            }\n          }\n        }\n        this.detailsOutputList = detailsOutputList\n      },\n      submit: function() {\n        let templateList = [],\n          detailsOutputList = this.detailsOutputList,\n          comment = '',\n          IbpComment = '';\n        for (let item of detailsOutputList) {\n          if (item.number !== 0) {\n            templateList.push(item)\n          } else if (item.evaluateType == 2 && item.evaluateItemType == 2 && this.serviceEvaluateStar !== 0) {\n            item.number = this.serviceEvaluateStar\n            templateList.push(item)\n          } else if (item.evaluateType == 1 && item.evaluateItemType == 1 && this.satisfaction !== 0) {\n            item.number = this.satisfaction\n            templateList.push(item)\n          }\n        }\n        if (this.activeComment) {\n          comment = comment + \",'projectComment':\" + this.activeComment\n        }\n        if (this.serviceComment) {\n          comment = comment + \",'comment':\" + this.serviceComment\n        }\n\n        saveEvaluate(this.cityId, this.marketId, this.id, this.$route.params.id, JSON.stringify(templateList), this.userName, this.referenceNo, this.referenceName, comment).then(res => {\n          if (res.res.code === 10000) {\n            this.$router.push({\n              path: '/evaluateSuccess/1'\n            })\n          }\n        })\n        if (this.activeComment) {\n          templateList.projectComment = this.activeComment\n        }\n        if (this.serviceComment) {\n          templateList.serviceComment = this.serviceComment\n        }\n        if (this.openProject) {\n          templateList.projectTitle = this.projectTitle\n        }\n        if (this.$route.params.type == 2) {\n          IBPsaveEvaluate(this.referenceNo, {\n            \"userName\": this.userName,\n            \"evaluateTime\": (new Date()).valueOf(),\n            \"detailsOutputList\": templateList\n          }).then(res => {\n            console.log(res)\n          })\n        } else if (this.come == 4) {\n          let evaluate = {\n            \"userName\": this.userName,\n            \"evaluateTime\": (new Date()).valueOf(),\n            \"detailsOutputList\": templateList\n          }\n          updateComplaint(this.marketId, this.referenceNo, JSON.stringify(evaluate)).then(res => {\n            console.log(res);\n          })\n        }\n      }\n    },\n    filters: {\n      starText: function(value) {\n        switch (value) {\n          case 1:\n            return '非常差'\n            break;\n          case 2:\n            return '差'\n            break;\n          case 3:\n            return '一般'\n            break;\n          case 4:\n            return '满意'\n            break;\n          case 5:\n            return '非常满意'\n            break;\n          default:\n\n        }\n      }\n    },\n    watch: {\n      serviceEvaluateStar: function() {\n        if (this.openProject && !this.satisfaction) {\n          this.cantEvaluate = '请选取' + this.projectTitle\n        }\n        let detailsOutputList = this.detailsOutputList\n        for (let item of detailsOutputList) {\n          if (item.evaluateType == 3 && item.evaluateItemType == 2) {\n            item.number = 0\n          }\n        }\n        this.detailsOutputList = detailsOutputList\n      },\n      satisfaction: function() {\n        if (!this.serviceEvaluateStar) {\n          this.cantEvaluate = '请选取服务评价'\n        }\n        let detailsOutputList = this.detailsOutputList\n        for (let item of detailsOutputList) {\n          if (item.evaluateType == 3 && item.evaluateItemType == 1) {\n            item.number = 0\n          }\n        }\n        this.detailsOutputList = detailsOutputList\n      }\n    }\n  }\n</script>\n\n<style scoped lang=\"scss\">\n  .evaluate {\n    min-height: 100vh;\n    background-color: rgba(243, 244, 246, 1);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    padding-bottom: 1.44rem;\n    box-sizing: border-box;\n\n    section {\n      width: 9.47rem;\n      background-color: rgba(255, 255, 255, 1);\n      box-shadow: 0 .05rem .11rem 0 rgba(0, 0, 0, 0.02);\n      border-radius: .21rem;\n      align-items: center;\n      margin-top: .27rem;\n      padding-bottom: .37rem;\n      display: flex;\n      flex-direction: column;\n      box-sizing: border-box;\n\n      textarea {\n        width: 8.72rem;\n        height: 2.93rem;\n        background-color: rgba(252, 252, 252, 1);\n        border-radius: .05rem;\n        border: 1px solid rgba(234, 234, 234, 1);\n        padding: .27rem;\n        font-size: .37rem;\n        font-family: PingFangSC-Regular;\n        font-weight: 400;\n        line-height: .53rem;\n        margin-top: .8rem;\n        box-sizing: border-box;\n      }\n\n      textarea::-webkit-input-placeholder {\n        color: rgba(201, 201, 201, 1);\n      }\n\n      h2 {\n        font-size: .37rem;\n        font-family: PingFangSC-Medium;\n        font-weight: 500;\n        color: rgba(51, 51, 51, 1);\n        line-height: .53rem;\n        margin-top: .53rem;\n      }\n\n      .satisfactionArticle {\n        display: flex;\n        margin-top: .64rem;\n\n        .noBox {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          margin-right: 1.15rem;\n        }\n\n        .yesBox {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          margin-left: 1.15rem;\n        }\n\n        .likeIcon {\n          width: 1.07rem;\n          height: 1.07rem;\n        }\n\n        .likeText {\n          box-sizing: border-box;\n          padding-top: .27rem;\n          font-size: .32rem;\n          font-family: PingFangSC-Regular;\n          font-weight: 400;\n          color: rgba(153, 153, 153, 1);\n          line-height: .45rem;\n        }\n\n        .likeActive {\n          color: #FF7800;\n        }\n      }\n\n      .labelBoxArticle {\n        display: flex;\n        flex-direction: row;\n        flex-wrap: wrap;\n        justify-content: center;\n        margin-top: .53rem;\n\n        .labelBoxText {\n          box-sizing: border-box;\n          padding: 0 .27rem;\n          height: .64rem;\n          border-radius: .37rem;\n          border: 1px solid rgba(218, 218, 218, 1);\n          line-height: .64rem;\n          text-align: center;\n          margin-bottom: .27rem;\n          margin-right: .19rem;\n          font-size: .32rem;\n          font-family: PingFangSC-Regular;\n          color: rgba(153, 153, 153, 1);\n        }\n\n        .labelBoxActive {\n          background-color: rgba(0, 189, 255, 0.1);\n          border: 1px solid rgba(0, 189, 255, 0.1);\n          font-family: PingFangSC-Regular;\n          color: rgba(0, 189, 255, 1);\n        }\n      }\n\n\n      .starBox {\n        flex-direction: row;\n        margin-top: .53rem;\n        justify-content: center;\n\n        .starIcon {\n          width: .69rem;\n          height: .69rem;\n          margin: 0 .27rem;\n        }\n      }\n\n      .fiveStari {\n        font-size: .32rem;\n        font-family: PingFangSC-Regular;\n        font-weight: 400;\n        color: rgba(255, 120, 0, 1);\n        line-height: .45rem;\n        margin-top: .27rem;\n      }\n    }\n\n    .bottomButton {\n      width: 10rem;\n      height: 1.44rem;\n      background: rgba(248, 248, 248, 1);\n      justify-content: center;\n      align-items: center;\n      display: flex;\n      position: fixed;\n      bottom: 0;\n    }\n\n    .bottomButtonActive {\n      width: 8.4rem;\n      height: 1.01rem;\n      background-image: linear-gradient(270deg, rgba(0, 189, 255, 1), rgba(0, 154, 255, 1));\n      border-radius: .51rem;\n      font-size: .45rem;\n      font-family: PingFangSC-Medium;\n      font-weight: 500;\n      color: rgba(255, 255, 255, 1);\n      line-height: 1.01rem;\n      text-align: center;\n    }\n\n    .cantGo {\n      width: 8.4rem;\n      height: 1.01rem;\n      background-color: #dadada;\n      border-radius: .51rem;\n      font-size: .45rem;\n      font-family: PingFangSC-Medium;\n      font-weight: 500;\n      color: rgba(255, 255, 255, 1);\n      line-height: 1.01rem;\n      text-align: center;\n    }\n  }\n</style>\n"]}]}